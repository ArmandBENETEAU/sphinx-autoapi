

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sphinx AutoAPI Reference Design &mdash; Sphinx AutoAPI 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/autoapi.css" type="text/css" />
  

  
    <link rel="top" title="Sphinx AutoAPI 1.0 documentation" href="index.html"/>
        <link rel="next" title="Sphinx AutoAPI Index" href="autoapi/index.html"/>
        <link rel="prev" title="Templates" href="templates.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Sphinx AutoAPI
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Main</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="config.html">AutoAPI Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">Templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="templates.html#structure">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#context">Context</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Sphinx AutoAPI Reference Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#goals">Goals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#primary-goals">Primary Goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#secondary-goals">Secondary Goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#autogenerated-output">Autogenerated Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#proposed-architecture">Proposed Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#yamltree">YAMLTree</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-structure-vs-hierarchy">File Structure vs. Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sphinx-implementation">Sphinx Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-ideas">Other Ideas</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">Sphinx AutoAPI Index</a><ul class="simple">
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Sphinx AutoAPI</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Sphinx AutoAPI Reference Design</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/design.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="sphinx-autoapi-reference-design">
<h1>Sphinx AutoAPI Reference Design<a class="headerlink" href="#sphinx-autoapi-reference-design" title="Permalink to this headline">¶</a></h1>
<p>This document talks about the design of a .NET Sphinx integration.
This will include a mechanism for generating Javadoc style API references automatically.
We will describe decisions that lead to specific implementation details.</p>
<div class="section" id="goals">
<h2>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h2>
<p>The main goal of this project is to be able to generate a MSDN or Javadoc style API reference from a .Net project in Sphinx.</p>
<div class="section" id="primary-goals">
<h3>Primary Goals<a class="headerlink" href="#primary-goals" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Build MSDN/Javadoc style HTML output for arbitrary .Net code.</p>
</li>
<li><p class="first">Have specific pages for each Package, Class, and all class-level structures.</p>
<blockquote>
<div><ul class="simple">
<li><cite>/api/System/</cite></li>
<li><cite>/api/System/String/</cite></li>
<li><cite>/api/System/String/Constructors/</cite></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="secondary-goals">
<h3>Secondary Goals<a class="headerlink" href="#secondary-goals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow for definition of .Net classes inside of normal Sphinx prose docs (classic Sphinx style definition).</li>
<li>Allow generation of Javadoc style docs from other languages.</li>
</ul>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>We are working with Sphinx,
which has an existing way of doing this.
Generally, you define a <cite>Domain</cite> which describes the various language structure,
a <em>Class</em> or <em>Method</em>, for example.
Then the user will write RST that uses these definitions,
and Sphinx will create output from that markup.</p>
<div class="highlight-rst"><div class="highlight"><pre><span class="p">..</span> <span class="ow">py:function</span><span class="p">::</span> spam(eggs)

   Spam the foo.
</pre></div>
</div>
<p>The author of the doucmentation will have now told Sphinx that the <em>spam</em> function exists in the Python project that is being documented.</p>
<div class="section" id="autogenerated-output">
<h3>Autogenerated Output<a class="headerlink" href="#autogenerated-output" title="Permalink to this headline">¶</a></h3>
<p>Sphinx then built a series of tools to make the generation of this markup easier and more automatic:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://sphinx-doc.org/ext/autodoc.html">Autodoc</a></li>
<li><a class="reference external" href="http://sphinx-doc.org/ext/autosummary.html">Autosummary</a></li>
</ul>
</div></blockquote>
<p>Autodoc is a Python-only solution that imports the author&#8217;s code into memory, and then allows the author to more automatically document full objects. For example, you can document a whole class on a page.</p>
<div class="highlight-py"><div class="highlight"><pre><span class="o">..</span> <span class="n">autoclass</span><span class="p">::</span> <span class="n">Noodle</span>
</pre></div>
</div>
<p>This will generate output that looks like:</p>
<dl class="class">
<dt id="Noodle">
<em class="property">class </em><code class="descname">Noodle</code><a class="headerlink" href="#Noodle" title="Permalink to this definition">¶</a></dt>
<dd><p>Noodle&#8217;s docstring.</p>
</dd></dl>

<p>There are also options for it to include a full listing of the classes attributes, methods, and other things, automatically.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Remember, this depends on <code class="docutils literal"><span class="pre">Noodle</span></code> being importable by the Python interpreter running Sphinx.</p>
</div>
</div>
</div>
<div class="section" id="proposed-architecture">
<h2>Proposed Architecture<a class="headerlink" href="#proposed-architecture" title="Permalink to this headline">¶</a></h2>
<p>The proposed architecture for this project is as follows:</p>
<blockquote>
<div><ul>
<li><p class="first">A program that will generate a YAML (or JSON) file from a .Net project, representing it&#8217;s full API information.</p>
</li>
<li><p class="first">Read the YAML and generate an appropriate tree structure that will the outputted HTML will look like (YAMLTree)</p>
<blockquote>
<div><ul class="simple">
<li>If time allows, we will allow a merging of these objects with multiple YAML files to allow for prose content to be injected into the output</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Take the YAML structure and generate in-memory rst that corresponds to the Sphinx dotnet Domain objects</p>
</li>
<li><p class="first">dotnet Domain will output HTML based on the doctree generated from the in-memory RST</p>
</li>
</ul>
</div></blockquote>
<p>In diagram form:</p>
<div class="highlight-python"><div class="highlight"><pre>Code -&gt; YAML -&gt; YAMLTree -&gt; RST (Dotnet Domain) -&gt; Sphinx -&gt; HTML
</pre></div>
</div>
<div class="section" id="yamltree">
<h3>YAMLTree<a class="headerlink" href="#yamltree" title="Permalink to this headline">¶</a></h3>
<p>One of the main problems is how to actually structure the outputted HTML pages.
The YAML file will likely be ordered,
but we need to have a place to define the page structure in the HTML.</p>
<p>This can be done before or after the loading of the content into RST.
We decided to do it before loading into RST because that matches standard Sphinx convention.
Generally the markup being fed in as RST is considered to be in a file that maps to it&#8217;s output loation.
If we tried to maniuplate this structure after loading into the Domain,
that could lead to unexpected consequences like wrong indexes and missing references.</p>
</div>
<div class="section" id="file-structure-vs-hierarchy">
<h3>File Structure vs. Hierarchy<a class="headerlink" href="#file-structure-vs-hierarchy" title="Permalink to this headline">¶</a></h3>
<p>Specific ID&#8217;s should have one specific detail representation.
This means that every YAML docid object should only have one place that it is rendered with a <code class="docutils literal"><span class="pre">..</span> <span class="pre">dn:&lt;method&gt;</span></code> canonical identifier.
All other places it is referenced should be in either:</p>
<blockquote>
<div><ul class="simple">
<li>A reference</li>
<li>A toctree (listing)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="sphinx-implementation">
<h3>Sphinx Implementation<a class="headerlink" href="#sphinx-implementation" title="Permalink to this headline">¶</a></h3>
<p>The user will run a normal <cite>make html</cite> as part of the experience.
The generation and loading will be done as an extension that can be configured.</p>
<p>There will be Sphinx configuration for how things get built:</p>
<div class="highlight-rst"><div class="highlight"><pre>autoapi_root = &#39;api&#39; # Where HTML is generated
autoapi_dir = &#39;yaml&#39; # Directory of YAML sources
</pre></div>
</div>
<p>We will then loop over all YAML files in the <code class="docutils literal"><span class="pre">autoapi_dir</span></code> and parse them.
They will then be output into <code class="docutils literal"><span class="pre">autoapi_root</span></code> inside the documentation.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>A nice example of Sphinx Python output similar to what we want:</p>
<ul class="simple">
<li><a class="reference external" href="http://dta.googlecode.com/git/doc/_build/html/index.html">http://dta.googlecode.com/git/doc/_build/html/index.html</a></li>
<li>Src: <a class="reference external" href="https://raw.githubusercontent.com/sfcta/dta/master/doc/index.rst">https://raw.githubusercontent.com/sfcta/dta/master/doc/index.rst</a></li>
</ul>
<p>An example domain for Spec:</p>
<ul class="simple">
<li><a class="reference external" href="https://subversion.xray.aps.anl.gov/bcdaext/specdomain/trunk/src/specdomain/sphinxcontrib/specdomain.py">https://subversion.xray.aps.anl.gov/bcdaext/specdomain/trunk/src/specdomain/sphinxcontrib/specdomain.py</a></li>
</ul>
</div>
<div class="section" id="other-ideas">
<h2>Other Ideas<a class="headerlink" href="#other-ideas" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Things in this section might not get implemented.</p>
</div>
<p>The .Net domain will not be able to depend on importing code from the users code base. We might be able to implement similar authoring tools with the YAML file. We might be able to output the YAML subtree of an object with autodoc style tools:</p>
<div class="highlight-rst"><div class="highlight"><pre><span class="p">..</span> <span class="ow">autodnclass</span><span class="p">::</span> System.String
   <span class="nc">:members:</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="autoapi/index.html" class="btn btn-neutral float-right" title="Sphinx AutoAPI Index" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="templates.html" class="btn btn-neutral" title="Templates" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Read the Docs, Inc.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>